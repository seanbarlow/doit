# Contract: Documentation Index Template

**File**: `.doit/templates/docs-index-template.md`
**Generated By**: `/doit.documentit index`
**Output Location**: `docs/index.md`

## Purpose

Defines the structure for the main documentation navigation file.

## Required Sections

| Section | Required | Auto-Generated | Description |
| ------- | -------- | -------------- | ----------- |
| Header | Yes | Partial | Title, dates, counts |
| Overview | No | No | Manual introduction |
| Features | Yes | Yes | Feature documentation links |
| Guides | Yes | Yes | Guide documentation links |
| API Reference | Yes | Yes | API documentation links |
| Templates | Yes | Yes | Template documentation links |
| Other | Yes | Yes | Uncategorized files |
| Additional Resources | No | No | Manual additions |

## Auto-Generated Markers

Content between these markers is regenerated on each `index` run:

```markdown
<!-- BEGIN:AUTO-GENERATED section="documentation-index" -->
[auto-generated content]
<!-- END:AUTO-GENERATED -->
```

Content OUTSIDE markers is preserved.

## Table Format

Each category section uses this table format:

```markdown
## [Category Name]

| Document | Description | Last Modified |
| -------- | ----------- | ------------- |
| [title](./path/file.md) | [first line summary] | [YYYY-MM-DD] |
```

### Field Extraction Rules

1. **title**: Extract from first `#` heading in file, or filename if no heading
2. **path**: Relative path from docs/ directory
3. **description**: First non-empty, non-heading line (max 80 chars, truncate with "...")
4. **last_modified**: File modification date from filesystem

## Category Assignment Rules

Files are assigned to categories based on location:

| Location | Category |
| -------- | -------- |
| `docs/features/` | Features |
| `docs/guides/` | Guides |
| `docs/api/` | API Reference |
| `docs/templates/` | Templates |
| `docs/` (root) | Other |

## Validation Rules

1. Index MUST list all `.md` files in docs/ and subdirectories
2. Empty categories SHOULD be omitted (no empty tables)
3. Links MUST be relative paths starting with `./`
4. Dates MUST be in ISO format (YYYY-MM-DD)
5. Total file count in header MUST match actual file count
6. Broken links MUST NOT be included (skip with warning)
