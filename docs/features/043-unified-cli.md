# Unified CLI Package

**Completed**: 2026-01-22
**Branch**: 043-unified-cli
**PR**: Pending

## Overview

Consolidated the two separate CLI packages (`doit_cli` and `doit_toolkit_cli`) into a single unified package structure. This refactoring eliminates the maintenance overhead, confusion about package boundaries, and import complexity that existed with the split structure. All code is now in one cohesive `doit_cli` package.

## Requirements Implemented

| ID | Description | Status |
|----|-------------|--------|
| FR-001 | Maintain all existing CLI command functionality | Done |
| FR-002 | Preserve all existing command-line options | Done |
| FR-003 | Keep `doit` entry point working | Done |
| FR-004 | Move all toolkit modules into doit_cli | Done |
| FR-005 | Update all import statements | Done |
| FR-006 | Update pyproject.toml | Done |
| FR-007 | Remove doit_toolkit_cli directory | Done |
| FR-008 | All existing tests pass with updated imports | Done |
| FR-009 | Resolve naming conflicts (github_service.py) | Done |
| FR-010 | Update documentation referencing old structure | N/A |

## Technical Details

### Key Decisions

1. **Single Package Structure**: All CLI code now resides in `src/doit_cli/`
2. **Service Merge**: Combined two `github_service.py` files into a unified service with:
   - Issue operations (get_issue, list_bugs, close_issue, add_comment)
   - Epic operations (fetch_epics, fetch_features_for_epic, create_epic)
   - Milestone operations (get_all_milestones, create_milestone, close_milestone)
   - Branch operations (check_branch_exists, create_branch)
3. **Exception Hierarchy**: Added `GitHubServiceError`, `GitHubAuthError`, `GitHubAPIError`
4. **Import Standardization**: All imports use `doit_cli.*` paths

### Files Changed

#### Files Moved (17)

- **Models (7)**: github_epic.py, github_feature.py, milestone.py, priority.py, roadmap.py, sync_metadata.py, sync_operation.py
- **Utils (4)**: fuzzy_match.py, github_auth.py, priority_mapper.py, spec_parser.py
- **Services (5)**: github_cache_service.py, github_linker.py, milestone_service.py, roadmap_matcher.py, roadmap_merge_service.py
- **Command (1)**: roadmapit.py â†’ roadmapit_impl.py

#### Files Merged (1)

- **github_service.py**: Combined issue operations with epic/milestone operations (748 lines)

#### Files Deleted

- Entire `src/doit_toolkit_cli/` directory

#### Configuration Updated

- **pyproject.toml**: Changed `packages = ["src/doit_cli", "src/doit_toolkit_cli"]` to `packages = ["src/doit_cli"]`

## Testing

### Automated Tests

- **Total**: 1345 tests
- **Passed**: 1345
- **Failed**: 0
- **Duration**: 50.28s

### Manual Tests

| Test | Description | Status |
|------|-------------|--------|
| MT-001 | `doit init` creates project structure | Pass |
| MT-002 | `doit roadmapit show` displays roadmap | Pass |
| MT-003 | `doit --help` shows all commands | Pass |
| MT-004 | Wheel installs cleanly | Pass |
| MT-005 | Imports work after install | Pass |

## Success Criteria Verification

| Criteria | Description | Status |
|----------|-------------|--------|
| SC-001 | All tests pass without test logic modifications | Pass |
| SC-002 | src/ contains only doit_cli | Pass |
| SC-003 | Zero imports reference doit_toolkit_cli | Pass |
| SC-004 | Package size not increased by >5% | Pass |
| SC-005 | All CLI commands produce identical output | Pass |
| SC-006 | Package builds successfully | Pass |

## Related Issues

No GitHub issues were created for this internal refactoring task.

---

Generated by `/doit.checkin` on 2026-01-22
